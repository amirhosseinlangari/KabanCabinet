const menuToggle=document.querySelector(".menu-toggle"),navContainer=document.querySelector(".nav-container"),overlay=document.querySelector(".overlay"),dropdowns=document.querySelectorAll(".dropdown-cabinet, .dropdown-mahsool"),darkModeToggle=document.getElementById("darkModeToggle"),mobileDarkMode=document.getElementById("mobileDarkMode"),menuLinks=document.querySelectorAll(".nav-container a:not(.cabinet):not(.mahsool)"),cabinetLink=document.querySelector(".cabinet"),mahsoolLink=document.querySelector(".mahsool");function toggleDarkMode(){document.body.classList.toggle("dark-mode"),localStorage.setItem("darkMode",document.body.classList.contains("dark-mode")?"enabled":"disabled")}function checkMenuDisplay(){if(menuToggle){const e=window.innerWidth<=768;if(menuToggle.style.display=e?"flex":"none",!e&&navContainer&&navContainer.classList.contains("active")&&closeMenu(),!e&&navContainer&&(navContainer.style.right="",navContainer.style.visibility="visible",navContainer.style.pointerEvents="auto"),!window.kabanAnalyticsLoaded){window.kabanAnalyticsLoaded=!0;try{window.innerWidth<480?sessionStorage.setItem("viewDevice","mobile"):window.innerWidth<768?sessionStorage.setItem("viewDevice","tablet"):sessionStorage.setItem("viewDevice","desktop"),sessionStorage.setItem("pageView",document.title)}catch(e){}}}}function closeMenu(){menuToggle&&navContainer&&overlay&&(menuToggle.classList.remove("active"),navContainer.classList.remove("active"),overlay.classList.remove("active"),document.body.style.overflow="",dropdowns.forEach(e=>{e.classList.remove("active")}))}darkModeToggle&&darkModeToggle.addEventListener("click",toggleDarkMode),mobileDarkMode&&mobileDarkMode.addEventListener("click",toggleDarkMode),navContainer&&navContainer.addEventListener("click",function(e){e.stopPropagation()}),menuToggle&&menuToggle.addEventListener("click",function(e){e.stopPropagation(),this.classList.toggle("active"),navContainer&&navContainer.classList.toggle("active"),overlay&&overlay.classList.toggle("active"),document.body.style.overflow=navContainer&&navContainer.classList.contains("active")?"hidden":""}),overlay&&overlay.addEventListener("click",closeMenu);let documentClickTimeout;document.addEventListener("click",function(){documentClickTimeout&&clearTimeout(documentClickTimeout),documentClickTimeout=setTimeout(()=>{navContainer&&navContainer.classList.contains("active")&&window.innerWidth<=768&&closeMenu()},10)}),dropdowns.forEach(e=>{const t=e.querySelector("a");t&&t.addEventListener("click",function(t){window.innerWidth<=768&&(t.preventDefault(),e.classList.contains("active")?e.classList.remove("active"):(dropdowns.forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.add("active")))})}),menuLinks.forEach(e=>{e.addEventListener("click",function(){window.innerWidth<=768&&closeMenu()})});let resizeTimeout;function recordUserInteraction(e,t){try{localStorage.setItem("lastInteraction",JSON.stringify({type:e,element:t,time:new Date().toISOString()}))}catch(e){}}document.addEventListener("DOMContentLoaded",()=>{"enabled"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode"),checkMenuDisplay(),document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",function(){recordUserInteraction("click",e.href||e.textContent||"link")})}),document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",function(){recordUserInteraction("click",e.id||e.textContent||"button")})})}),window.addEventListener("resize",function(){resizeTimeout&&clearTimeout(resizeTimeout),resizeTimeout=setTimeout(checkMenuDisplay,100)}); 