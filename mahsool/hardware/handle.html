<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ุฏุณุชฺฏุฑู ฺฉุงุจูุช ุจุง ฺฉูุช - ุงููุงุน ุฏุณุชฺฏุฑู ูุง ูุฏุฑู ู ฺฉูุงุณฺฉ ุฏุฑ ฺฉุงุจูุช ฺฉุงุจุงู">
    <meta name="keywords" content="ุฏุณุชฺฏุฑู ฺฉุงุจูุชุ ุฑุงู ุขูุงุชุ ฺฉุงุจูุช ฺฉุงุจุงูุ ุฏุณุชฺฏุฑู ูุฏุฑูุ ุฏุณุชฺฏุฑู ฺฉูุงุณฺฉ">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#f1c68e">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../css/mahsool-styles.css">
    <title>ุฏุณุชฺฏุฑู ฺฉุงุจูุช | ฺฉุงุจูุช ฺฉุงุจุงู</title>
    <style>
        .notification {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            width: auto !important;
            max-width: 300px !important;
            height: auto !important;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification.error {
            background-color: #f44336;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <section>
        <nav id="nav">
            <div class="header-content">
                <a href="../../index.html">
                    <img src="../../assets/Photo/ููุงุฏฺฉ ฺฉุงุจุงู.png" alt="logo" id="logo-nav">
                </a>
                <div class="textlogo">ฺฉุงุจูุช ฺฉุงุจุงู</div>
            </div>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-container">
                <div class="dropdown-cabinet">
                    <a class="cabinet" href="#">ฺฉุงุจูุช</a>
                    <div class="submenu-cabinet">
                        <a href="../../cabinets/cabinet-mdf.html">ฺฉุงุจูุช MDF</a>
                        <a href="../../cabinets/cabinet-metal.html">ฺฉุงุจูุช ููุฒ</a>
                        <a href="../../cabinets/cabinet-highgloss.html">ฺฉุงุจูุช ูุงฺฏูุงุณ</a>
                        <a href="../../cabinets/cabinet-membrane.html">ฺฉุงุจูุช ููุจุฑุงู</a>
                        <a href="../../cabinets/cabinet-neoclassic.html">ฺฉุงุจูุช ูุฆู ฺฉูุงุณฺฉ</a>
                    </div>
                </div>
                <div class="dropdown-mahsool">
                    <a class="mahsool" href="#">ูุญุตููุงุช</a>
                    <div class="submenu-mahsool">
                        <a href="../cabinet.html">ฺฉุงุจูุช</a>
                        <a href="../accessories.html">ุฑุงู ุขูุงุช</a>
                        <a href="../3d-designs/index.html">ุทุฑุญ ุณู ุจุนุฏ</a>
                    </div>
                </div>
                <a class="weblog" href="../../weblog/index.html">ูุจูุงฺฏ</a>
                <a class="portfolio" href="../../portfolio/index.html">ููููู ฺฉุงุฑ</a>
                <a class="about" href="#">ุฏุฑุจุงุฑู ูุง</a>
                <a class="contact" href="#">ุชูุงุณ ุจุง ูุง</a>
                <div class="mobile-nav-buttons">
                    <a class="login-register" id="login-register-menu" href="../../account/login.html">
                        <img src="../../assets/icon/log in.png" alt="ูุฑูุฏ" class="login-icon">
                        <span class="login-text">ูุฑูุฏ / ุซุจุช ูุงู</span>
                    </a>
                </div>
                <div class="mobile-dark-mode">
                    <button id="mobileDarkMode" class="dark-mode-btn mobile">
                        <span class="moon">๐</span>
                        <span class="sun">โ๏ธ</span>
                        <span class="dark-mode-text">ุญุงูุช ุดุจ</span>
                    </button>
                </div>
            </div>
            <button id="darkModeToggle" class="dark-mode-btn desktop">
                <span class="moon">๐</span>
                <span class="sun">โ๏ธ</span>
            </button>
        </nav>
    </section>

    <section class="mahsool-detail-section">
        <div class="mahsool-container">
            <div class="mahsool-header">
                <h1>ุฏุณุชฺฏุฑู ฺฉุงุจูุช</h1>
                <div class="title-underline"></div>
                <p class="mahsool-description">
                    ุฏุณุชฺฏุฑูโูุง ฺฉุงุจูุช ูุง ุจุง ุทุฑุงุญ ูุฏุฑู ู ุดฺฉุ ุฌูููโุง ุฎุงุต ุจู ฺฉุงุจูุช ุดูุง ูโุจุฎุดูุฏ. 
                    ุงู ุฏุณุชฺฏุฑูโูุง ุงุฒ ุขูุงฺูุง ููุงูู ู ุจุง ฺฉูุช ุณุงุฎุชู ุดุฏูโุงูุฏ ุชุง ุฏุฑ ุงุณุชูุงุฏูโูุง ุฑูุฒูุฑูุ ุฏูุงู ู ุฒุจุง ุฎูุฏ ุฑุง ุญูุธ ฺฉููุฏ.
                </p>
            </div>

            <div class="product-details">
                <div class="product-images">
                    <div class="main-image">
                        <img src="../../assets/Photo/mahsool/dastgireh.jpg" alt="ุฏุณุชฺฏุฑู ฺฉุงุจูุช">
                    </div>
                </div>
                
                <div class="product-info">
                    <h2>ูฺฺฏโูุง ูุญุตูู</h2>
                    <ul class="features-list">
                        <li>ุทุฑุงุญ ูุฏุฑู ู ุฎุท ููุงุณุจ ุจุฑุง ฺฉุงุจูุชโูุง ูุฏุฑู</li>
                        <li>ุณุงุฎุชู ุดุฏู ุงุฒ ุขูุงฺ ุขูููููู ุจุง ุฑูฺฉุด ุงุณุชู ุถุฏ ุฒูฺฏ</li>
                        <li>ููุงูู ุฏุฑ ุจุฑุงุจุฑ ุฎุฑุงุด ู ุฑุทูุจุช</li>
                        <li>ุณุทุญ ุตูู ู ุถุฏ ุงุซุฑ ุงูฺฏุดุช</li>
                        <li>ุณูููุช ุฏุฑ ูุตุจ ุจุง ูพฺโูุง ุชูุธู ุดููุฏู</li>
                        <li>ุจุณุชูโุจูุฏ ุดุงูู 5 ุนุฏุฏ ุฏุณุชฺฏุฑู ุจู ููุฑุงู ูพฺ ู ุงุชุตุงูุงุช</li>
                    </ul>
                    
                    <div class="product-price">
                        <span class="price-label">ููุช:</span>
                        <span class="price-value">350,000 ุชููุงู</span>
                    </div>
                    
                    <button class="add-to-cart-btn"
                        data-id="handle-001"
                        data-name="ุฏุณุชฺฏุฑู ฺฉุงุจูุช"
                        data-price="350000"
                        data-image="../../assets/Photo/mahsool/dastgireh.jpg">
                        <span class="cart-icon">๐</span>
                        ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ
                    </button>
                </div>
            </div>
            
            <div class="technical-specs">
                <h2>ูุดุฎุตุงุช ูู</h2>
                <table class="specs-table">
                    <tr>
                        <td>ุฌูุณ</td>
                        <td>ุขูุงฺ ุขูููููู ุจุง ุฑูฺฉุด ุงุณุชู</td>
                    </tr>
                    <tr>
                        <td>ุงุจุนุงุฏ</td>
                        <td>ุทูู: 15 ุณุงูุชูุชุฑุ ูุทุฑ: 1.2 ุณุงูุชูุชุฑ</td>
                    </tr>
                    <tr>
                        <td>ูุงุตูู ุณูุฑุงุฎโูุง</td>
                        <td>12.8 ุณุงูุชูุชุฑ</td>
                    </tr>
                    <tr>
                        <td>ุชุนุฏุงุฏ ุฏุฑ ุจุณุชู</td>
                        <td>5 ุนุฏุฏ ุฏุณุชฺฏุฑู + ูพฺ ู ุงุชุตุงูุงุช</td>
                    </tr>
                    <tr>
                        <td>ฺฏุงุฑุงูุช</td>
                        <td>18 ูุงู</td>
                    </tr>
                </table>
            </div>
            
            <div class="contact-section">
                <h2>ูุดุงูุฑู ู ุงุณุชุนูุงู ููุช</h2>
                <p>ุจุฑุง ฺฉุณุจ ุงุทูุงุนุงุช ุจุดุชุฑ ู ูุดุงูุฑู ุฑุงฺฏุงู ุจุง ฺฉุงุฑุดูุงุณุงู ูุง ุชูุงุณ ุจฺฏุฑุฏ</p>
                <a href="../../contact-us/index.html" class="contact-button">ุชูุงุณ ุจุง ูุง</a>
            </div>
        </div>
    </section>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo-container">
                <div class="footer-logo-wrapper">
                    <img src="../../assets/Photo/ููุงุฏฺฉ ฺฉุงุจุงู.png" alt="ููฺฏู ฺฉุงุจุงู" class="footer-logo" width="65" height="65">
                </div>
                <div class="footer-logo-text">ฺฉุงุจูุช ฺฉุงุจุงู</div>
            </div>
            
            <div class="footer-links-container">
                <div class="footer-address">
                    <h4>ุขุฏุฑุณ ูุง</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> ุชูุฑุงูุ ุตูุงุฏุดุชุ ุฌูุจ ฺฉูฺู ูุจูุชุ ฺฉุงุจูุช ฺฉุงุจุงู</p>
                        <p><i class="fas fa-phone"></i> <span>09121773915</span></p>
                        <p><i class="fas fa-envelope"></i> <span>info@kabancabinet.com</span></p>
                        <p><i class="fas fa-clock"></i> ุดูุจู ุชุง ูพูุฌุดูุจู 9 ุงู 19</p>
                    </div>
                </div>
            </div>
        </div>
        

    </footer>

    <script src="../../scripts/main.js"></script>
    <script src="../../scripts/sw-register.js" defer></script>
    
    <script>
    // Custom cart functionality for this page only
    document.addEventListener('DOMContentLoaded', function() {
        console.log("Custom cart handler loaded");
        
        // Update cart badge on page load
        updateCartBadge();
        
        // Function to update cart badge
        function updateCartBadge() {
            try {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartCount = cart.reduce((total, item) => total + (item?.quantity || 0), 0);
                
                // Update desktop cart badge
                const cartBadgeDesktop = document.getElementById('cart-badge-desktop');
                if (cartBadgeDesktop) {
                    cartBadgeDesktop.textContent = cartCount;
                    cartBadgeDesktop.style.display = cartCount > 0 ? 'flex' : 'none';
                }
                
                // Update mobile cart badge
                const cartBadgeMobile = document.getElementById('cart-badge');
                if (cartBadgeMobile) {
                    cartBadgeMobile.textContent = cartCount;
                    cartBadgeMobile.style.display = cartCount > 0 ? 'flex' : 'none';
                }
                
                console.log("Cart badge updated: count =", cartCount);
            } catch (error) {
                console.error("Error updating cart badge:", error);
            }
        }
        
        // Check if user is logged in - check both token keys for compatibility
        function isUserLoggedIn() {
            const authToken = localStorage.getItem('auth_token');
            const kabanToken = localStorage.getItem('kabanToken');
            const isLoggedIn = !!authToken || !!kabanToken;
            console.log("Login check:", isLoggedIn, { authToken, kabanToken });
            return isLoggedIn;
        }

        // Add direct event listener for our specific button
        const addButton = document.querySelector('.add-to-cart-btn');
        if (addButton) {
            addButton.addEventListener('click', function(e) {
                console.log("Add to cart button clicked");
                e.preventDefault();
                
                // Check if user is logged in
                if (!isUserLoggedIn()) {
                    showNotification('ูุทูุง ุงุจุชุฏุง ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ', 'error');
                    // Save current page for redirect after login
                    sessionStorage.setItem('redirectAfterLogin', window.location.href);
                    // Redirect to login page after a delay
                    setTimeout(() => {
                        window.location.href = '../../auth/login.html?redirect=' + encodeURIComponent(window.location.href);
                    }, 1500);
                    return;
                }
                
                // Hardcoded product data for this specific handle product
                const productId = "handle-001";
                const productName = "ุฏุณุชฺฏุฑู ฺฉุงุจูุช";
                const productPrice = 350000;
                const productImage = "../../assets/Photo/mahsool/dastgireh.jpg";
                
                console.log("Adding product to cart:", {
                    id: productId,
                    name: productName,
                    price: productPrice,
                    image: productImage
                });
                
                // Add to cart
                addToCart(productId, productName, productPrice, productImage);
                showNotification('ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ ุงุถุงูู ุดุฏ', 'success');
            });
        } else {
            console.error("Add to cart button not found");
        }
        
        // Function to add product to cart
        function addToCart(id, name, price, image) {
            try {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                
                // Check if product already exists in cart
                const existingItemIndex = cart.findIndex(item => item && item.id === id);
                
                if (existingItemIndex > -1) {
                    // Increment quantity if product already in cart
                    cart[existingItemIndex].quantity = (cart[existingItemIndex].quantity || 0) + 1;
                } else {
                    // Add new item to cart
                    cart.push({
                        id: id,
                        name: name,
                        price: price,
                        image: image,
                        quantity: 1
                    });
                }
                
                console.log('Added to cart:', {id, name, price, image});
                console.log('Updated cart:', cart);
                
                // Save updated cart to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update the cart badge
                updateCartBadge();
            } catch (error) {
                console.error("Error adding to cart:", error);
                showNotification('ุฎุทุง ุฏุฑ ุงูุฒูุฏู ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ', 'error');
            }
        }
        
        // Function to show notification
        function showNotification(message, type = 'success') {
            // Remove any existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(n => n.remove());
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Hide and remove notification after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    });
    </script>
</body>
</html> 