<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ูุญุตููุงุช ฺฉุงุจูุช ฺฉุงุจุงู - ุงููุงุน ฺฉุงุจูุชโูุง ุขุดูพุฒุฎุงูู ุจุง ุทุฑุงุญ ูุฏุฑู">
    <meta name="keywords" content="ฺฉุงุจูุชุ ฺฉุงุจูุช ุขุดูพุฒุฎุงููุ ฺฉุงุจุงูุ mdfุ ููุจุฑุงูุ ูุงฺฏูุงุณุ ูุญุตููุงุช">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#f1c68e">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="css/mahsool-styles.css">
    <title>ูุญุตููุงุช ฺฉุงุจูุช ฺฉุงุจุงู</title>
</head>
<body>
    <div class="overlay"></div>
    <section>
        <nav id="nav">
            <div class="header-content">
                <a href="../index.html">
                    <img src="../assets/Photo/ููุงุฏฺฉ ฺฉุงุจุงู.png" alt="logo" id="logo-nav">
                </a>
                <div class="textlogo">ฺฉุงุจูุช ฺฉุงุจุงู</div>
            </div>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-container">
                <div class="dropdown-cabinet">
                    <a class="cabinet" href="#">ฺฉุงุจูุช</a>
                    <div class="submenu-cabinet">
                        <a href="../cabinets/cabinet-mdf.html">ฺฉุงุจูุช MDF</a>
                        <a href="../cabinets/cabinet-metal.html">ฺฉุงุจูุช ููุฒ</a>
                        <a href="../cabinets/cabinet-highgloss.html">ฺฉุงุจูุช ูุงฺฏูุงุณ</a>
                        <a href="../cabinets/cabinet-membrane.html">ฺฉุงุจูุช ููุจุฑุงู</a>
                        <a href="../cabinets/cabinet-neoclassic.html">ฺฉุงุจูุช ูุฆู ฺฉูุงุณฺฉ</a>
                    </div>
                </div>
                <div class="dropdown-mahsool">
                    <a class="mahsool" href="#">ูุญุตููุงุช</a>
                    <div class="submenu-mahsool">
                        <a href="cabinet.html" class="active-link">ฺฉุงุจูุช</a>
                        <a href="accessories.html">ุฑุงู ุขูุงุช</a>
                        <a href="3d-designs.html">ุทุฑุญ ุณู ุจุนุฏ</a>
                    </div>
                </div>
                <a class="weblog" href="#">ูุจูุงฺฏ</a>
                <a class="portfolio" href="../portfolio/index.html">ููููู ฺฉุงุฑ</a>
                <a class="about" href="#">ุฏุฑุจุงุฑู ูุง</a>
                <a class="contact" href="#">ุชูุงุณ ุจุง ูุง</a>
                <div class="mobile-nav-buttons">
                    <a class="login-register" id="login-register-menu" href="../account/login.html">
                        <img src="../assets/icon/log in.png" alt="ูุฑูุฏ" class="login-icon">
                        <span class="login-text">ูุฑูุฏ / ุซุจุช ูุงู</span>
                    </a>
                </div>
                <div class="mobile-dark-mode">
                    <button id="mobileDarkMode" class="dark-mode-btn mobile">
                        <span class="moon">๐</span>
                        <span class="sun">โ๏ธ</span>
                        <span class="dark-mode-text">ุญุงูุช ุดุจ</span>
                    </button>
                </div>
            </div>
            <button id="darkModeToggle" class="dark-mode-btn desktop">
                <span class="moon">๐</span>
                <span class="sun">โ๏ธ</span>
            </button>
            <div class="desktop-nav-buttons">
                <a class="login-register" id="login-register-menu-desktop" href="../account/login.html">
                    <img src="../assets/icon/log in.png" alt="ูุฑูุฏ" class="login-icon">
                </a>
                <a class="cart-link" href="../account/cart.html">
                    <span class="cart-icon">๐</span>
                    <span class="cart-count" id="cart-badge-desktop">0</span>
                </a>
            </div>
        </nav>
    </section>

    <main class="container">
        <section class="page-header">
            <h1>ฺฉุงุจูุชโูุง ฺฉุงุจุงู</h1>
            <p class="subtitle">ุทุฑุงุญ ู ุชููุฏ ุงููุงุน ฺฉุงุจูุชโูุง ูุฏุฑู ู ฺฉูุงุณฺฉ ุจุง ุจุงูุงุชุฑู ฺฉูุช</p>
        </section>

        <div class="products-container">
            <!-- ูุญุตููุงุช ุงุฒ API ุจุงุฑฺฏุฐุงุฑ ุฎูุงููุฏ ุดุฏ -->
        </div>

    <section class="mahsool-detail-section">
        <div class="mahsool-container">
            <div class="mahsool-header">
                <h1>ฺฉุงุจูุชโูุง ฺฉุงุจุงู</h1>
                <div class="title-underline"></div>
                <p class="mahsool-description">ุตูุงุน ฺฉุงุจูุช ฺฉุงุจุงู ุจุง ุจุด ุงุฒ ุณู ุฏูู ุชุฌุฑุจู ุฏุฑ ุทุฑุงุญ ู ุณุงุฎุช ุงููุงุน ฺฉุงุจูุชุ ุจุง ุงุณุชูุงุฏู ุงุฒ ุจูุชุฑู ูุชุฑุงูโูุง ู ูุฏุฑูโุชุฑู ุชฺฉููููฺโูุงุ ูุญุตููุงุช ูุชููุน ุฑุง ุจุฑุง ุณูููโูุง ูุฎุชูู ุงุฑุงุฆู ูโฺฉูุฏ.</p>
            </div>
            
            <div class="mahsool-grid">
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-mdf.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/ฺฉุงุจูุช mdf.jpg" alt="ฺฉุงุจูุช MDF">
                        </div>
                        <div class="mahsool-info">
                            <h3>ฺฉุงุจูุช MDF</h3>
                            <p>ฺฉุงุจูุช MDF ฺฉ ุงุฒ ูพุฑุทุฑูุฏุงุฑุชุฑู ุงููุงุน ฺฉุงุจูุชโูุง ุขุดูพุฒุฎุงูู ุงุณุช ฺฉู ุงุฒ ุตูุญุงุช MDF ุณุงุฎุชู ูโุดูุฏ.</p>
                            <span class="read-more">ุจุดุชุฑ ุจุฎูุงูุฏ</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-metal.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/ฺฉุงุจูุช ููุฒ.jpg" alt="ฺฉุงุจูุช ููุฒ">
                        </div>
                        <div class="mahsool-info">
                            <h3>ฺฉุงุจูุช ููุฒ</h3>
                            <p>ฺฉุงุจูุชโูุง ููุฒ ุงุฒ ุฌููู ููุงููโุชุฑู ู ุจุงุฏูุงูโุชุฑู ุงููุงุน ฺฉุงุจูุชโูุง ุขุดูพุฒุฎุงูู ูุณุชูุฏ.</p>
                            <span class="read-more">ุจุดุชุฑ ุจุฎูุงูุฏ</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-highgloss.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/ฺฉุงุจูุช ูุง ฺฏูุงุณ.jpg" alt="ฺฉุงุจูุช ูุงฺฏูุงุณ">
                        </div>
                        <div class="mahsool-info">
                            <h3>ฺฉุงุจูุช ูุงฺฏูุงุณ</h3>
                            <p>ฺฉุงุจูุชโูุง ูุงฺฏูุงุณ ุจุง ุณุทุญ ุจุฑุงู ู ุฏุฑุฎุดุงูุ ุธุงูุฑ ููฺฉุณ ู ูุฏุฑู ุจู ุขุดูพุฒุฎุงูู ูโุจุฎุดูุฏ.</p>
                            <span class="read-more">ุจุดุชุฑ ุจุฎูุงูุฏ</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-membrane.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/ฺฉุงุจูุช ููุจุฑุงู.jpg" alt="ฺฉุงุจูุช ููุจุฑุงู">
                        </div>
                        <div class="mahsool-info">
                            <h3>ฺฉุงุจูุช ููุจุฑุงู</h3>
                            <p>ฺฉุงุจูุชโูุง ููุจุฑุงู ุจุง ุฑูฺฉุด PVC ฺฉู ุจู ุตูุฑุช ูฺฉูู ุฑู MDF ฺฉุดุฏู ูโุดููุฏุ ุงุฒ ุฒุจุงุชุฑู ุงููุงุน ฺฉุงุจูุชโูุง ูุณุชูุฏ.</p>
                            <span class="read-more">ุจุดุชุฑ ุจุฎูุงูุฏ</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-neoclassic.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/ฺฉุงุจูุช ูุฆู ฺฉูุงุณฺฉ.jpg" alt="ฺฉุงุจูุช ูุฆู ฺฉูุงุณฺฉ">
                        </div>
                        <div class="mahsool-info">
                            <h3>ฺฉุงุจูุช ูุฆู ฺฉูุงุณฺฉ</h3>
                            <p>ฺฉุงุจูุชโูุง ูุฆู ฺฉูุงุณฺฉ ุชุฑฺฉุจ ุงุฒ ุณุจฺฉ ฺฉูุงุณฺฉ ู ูุฏุฑู ูุณุชูุฏ ฺฉู ุฒุจุง ู ุนูุงุตุฑ ุณูุช ุฑุง ุจุง ฺฉุงุฑุจุฑุฏ ุจูุฏู ู ุณุงุฏฺฏ ูุฏุฑู ุชุฑฺฉุจ ูโฺฉููุฏ.</p>
                            <span class="read-more">ุจุดุชุฑ ุจุฎูุงูุฏ</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <div class="mahsool-features">
                <h2>ูฺฺฏโูุง ฺฉุงุจูุชโูุง ฺฉุงุจุงู</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon">๐๏ธ</div>
                        <h3>ูุชุฑุงู ุจุง ฺฉูุช</h3>
                        <p>ุงุณุชูุงุฏู ุงุฒ ุจูุชุฑู ูุชุฑุงูโูุง ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ุฑูุฒ ุฏูุง</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">๐จ</div>
                        <h3>ุทุฑุงุญ ููุญุตุฑุจูโูุฑุฏ</h3>
                        <p>ุทุฑุงุญ ุงุฎุชุตุงุต ูุชูุงุณุจ ุจุง ุณููู ู ูุถุง ุดูุง</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">โฑ๏ธ</div>
                        <h3>ูุงูุฏฺฏุงุฑ ุจุงูุง</h3>
                        <p>ุฏูุงู ู ูุงูุฏฺฏุงุฑ ุทููุงูโูุฏุช ุจุง ฺฉูุชุฑู ุงุณุชููุงฺฉ</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">๐ง</div>
                        <h3>ูุตุจ ุชุฎุตุต</h3>
                        <p>ูุตุจ ุฏูู ู ุญุฑููโุง ุชูุณุท ุชู ูุชุฎุตุต ูุง</p>
                    </div>
                </div>
            </div>
            
            <div class="contact-section">
                <h2>ูุดุงูุฑู ู ุงุณุชุนูุงู ููุช</h2>
                <p>ุจุฑุง ฺฉุณุจ ุงุทูุงุนุงุช ุจุดุชุฑ ู ูุดุงูุฑู ุฑุงฺฏุงู ุจุง ฺฉุงุฑุดูุงุณุงู ูุง ุชูุงุณ ุจฺฏุฑุฏ</p>
                <a href="#" class="contact-button">ุชูุงุณ ุจุง ูุง</a>
            </div>
        </div>
    </section>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo-container">
                <div class="footer-logo-wrapper">
                    <img src="../assets/Photo/ููุงุฏฺฉ ฺฉุงุจุงู.png" alt="ููฺฏู ฺฉุงุจุงู" class="footer-logo" width="65" height="65">
                </div>
                <div class="footer-logo-text">ฺฉุงุจูุช ฺฉุงุจุงู</div>
                <div class="social-icons">
                    <a href="#" class="social-icon" aria-label="ุงูุณุชุงฺฏุฑุงู"><i>๐ธ</i></a>
                    <a href="#" class="social-icon" aria-label="ุชูฺฏุฑุงู"><i>๐ฌ</i></a>
                    <a href="#" class="social-icon" aria-label="ูุงุชุณุงูพ"><i>๐ฑ</i></a>
                </div>
            </div>
            
            <div class="footer-links-container">
                <div class="footer-address">
                    <h4>ุขุฏุฑุณ ูุง</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> ุชูุฑุงูุ ุตูุงุฏุดุชุ ุฌูุจ ฺฉูฺู ูุจูุชุ ฺฉุงุจูุช ฺฉุงุจุงู</p>
                        <p><i class="fas fa-phone"></i> <span>ฐนฑฒฑททณนฑต</span></p>
                        <p><i class="fas fa-envelope"></i> <span>info@kabancabinet.com</span></p>
                        <p><i class="fas fa-clock"></i> ุดูุจู ุชุง ูพูุฌุดูุจู น ุงู ฑน</p>
                    </div>
                </div>
                <div class="footer-links">
                    <h4>ุงุฑุชุจุงุท ุจุง ูุง</h4>
                    <ul>
                        <li><a href="#">ุชูุงุณ ุจุง ูุง</a></li>
                        <li><a href="../about-us/index.html">ุฏุฑุจุงุฑู ูุง</a></li>
                        <li class="footer-contact-item"><i class="footer-icon">๐ฑ</i><span>ฐนฑฒฑททณนฑต</span></li>
                        <li class="footer-contact-item"><i class="footer-icon">๐ง</i><span>info@kabancabinet.ir</span></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="copyright">ยฉ ฑดฐณ ฺฉุงุจูุช ฺฉุงุจุงู - ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
        </div>
    </footer>

    <script src="../scripts/main.js" defer></script>
    <script src="../scripts/sw-register.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // ุฏุฑุงูุช ูุญุตููุงุช ุฏุณุชูโุจูุฏ ฺฉุงุจูุช ุงุฒ API
        getCabinetProducts();
    });

    /**
     * ุฏุฑุงูุช ูุญุตููุงุช ฺฉุงุจูุช ุงุฒ API
     */
    function getCabinetProducts() {
        const productsContainer = document.querySelector('.products-container');
        
        // ููุงุด ูุถุนุช ุจุงุฑฺฏุฐุงุฑ
        productsContainer.innerHTML = '<div class="loading-spinner">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ูุญุตููุงุช...</div>';
        
        // ุฏุฑุฎูุงุณุช ููุชุฑ ุดุฏู ุจู API ุจุฑุง ุฏุฑุงูุช ููุท ูุญุตููุงุช ุฏุณุชูโุจูุฏ ฺฉุงุจูุช
        fetch("http://localhost:3000/api/products?category=cabinet")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`ุฎุทุง HTTP: ${response.status}`);
                }
                return response.json();
            })
            .then(products => {
                console.log("ฺฉุงุจูุชโูุง ุฏุฑุงูุช ุดุฏู:", products);
                
                // ููุงุด ูุญุตููุงุช ุฏุฑ ุตูุญู
                displayCabinetProducts(products, productsContainer);
            })
            .catch(error => {
                console.error("ุฎุทุง ุฏุฑ ุฏุฑุงูุช ฺฉุงุจูุชโูุง:", error);
                productsContainer.innerHTML = `
                    <div class="error-message">
                        <p>ูุชุฃุณูุงูู ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุจูุชโูุง ุฎุทุง ุฑุฎ ุฏุงุฏู ุงุณุช.</p>
                        <p>ูุทูุงู ุตูุญู ุฑุง ุฏูุจุงุฑู ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ ุง ุจุนุฏุงู ุชูุงุด ฺฉูุฏ.</p>
                        <p>ุฌุฒุฆุงุช ุฎุทุง: ${error.message}</p>
                    </div>
                `;
            });
    }

    /**
     * ููุงุด ูุญุตููุงุช ฺฉุงุจูุช ุฏุฑ ุตูุญู
     */
    function displayCabinetProducts(products, container) {
        // ุงฺฏุฑ ูุญุตูู ูุฌูุฏ ูุฏุงุดุชุ ูพุงู ููุงุณุจ ููุงุด ุจุฏู
        if (!products || products.length === 0) {
            container.innerHTML = '<div class="no-products">ูุญุตูู ุจุฑุง ููุงุด ูุฌูุฏ ูุฏุงุฑุฏ</div>';
            return;
        }
        
        // ูพุงฺฉ ฺฉุฑุฏู ูุญุชูุง ูุจู
        container.innerHTML = '';
        
        // ุงุฌุงุฏ ู ุงูุฒูุฏู ฺฉุงุฑุช ูุญุตูู ุจุฑุง ูุฑ ฺฉุงุจูุช
        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            
            // ุชุตูุฑ ูพุดโูุฑุถ ุงฺฏุฑ ูุญุตูู ุชุตูุฑ ูุฏุงุดุช
            const imageUrl = product.images && product.images.length > 0 
                ? product.images[0] 
                : '../assets/Photo/placeholder.jpg';
            
            // ูฺฺฏโูุง ูุญุตูู
            const featuresList = product.features && product.features.length > 0
                ? `<ul class="product-features">
                    ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                   </ul>`
                : '';
            
            // ุฑูฺฏโูุง ููุฌูุฏ
            const colorsList = product.colors && product.colors.length > 0
                ? `<div class="product-colors">
                    ${product.colors.map(color => `<span class="color-option" style="background-color: ${color}"></span>`).join('')}
                   </div>`
                : '';
            
            productCard.innerHTML = `
                <div class="product-image">
                    <img src="${imageUrl}" alt="${product.name}" loading="lazy">
                    ${product.inStock ? '<span class="badge in-stock">ููุฌูุฏ</span>' : '<span class="badge out-of-stock">ูุงููุฌูุฏ</span>'}
                </div>
                <div class="product-details">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description.substring(0, 100)}...</p>
                    ${featuresList}
                    ${colorsList}
                    <div class="product-price">${formatPrice(product.price)} ุชููุงู</div>
                    <div class="product-actions">
                        <button class="btn view-product" data-id="${product._id}">ูุดุงูุฏู ุฌุฒุฆุงุช</button>
                        <button class="btn add-to-cart" data-id="${product._id}" ${!product.inStock ? 'disabled' : ''}>
                            ${product.inStock ? 'ุงูุฒูุฏู ุจู ุณุจุฏ' : 'ูุงููุฌูุฏ'}
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(productCard);
        });
        
        // ุงุถุงูู ฺฉุฑุฏู ุฑูุฏุงุฏูุง ุจู ุฏฺฉููโูุง ูุญุตูู
        addCabinetProductEventListeners();
    }

    /**
     * ูุฑูุช ฺฉุฑุฏู ููุช ุจู ุตูุฑุช ุฎูุงูุง ุจุง ุฌุฏุงฺฉููุฏู ูุฒุงุฑฺฏุงู
     */
    function formatPrice(price) {
        return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    /**
     * ุงุถุงูู ฺฉุฑุฏู ุฑูุฏุงุฏูุง ุจู ุฏฺฉููโูุง ูุญุตูู
     */
    function addCabinetProductEventListeners() {
        // ุฑูุฏุงุฏ ุฏฺฉูู ูุดุงูุฏู ุฌุฒุฆุงุช
        document.querySelectorAll('.view-product').forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-id');
                window.location.href = `product.html?id=${productId}`;
            });
        });
        
        // ุฑูุฏุงุฏ ุฏฺฉูู ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ
        document.querySelectorAll('.add-to-cart:not([disabled])').forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-id');
                
                // ุฏุฑุงูุช ุงุทูุงุนุงุช ูุญุตูู ุงุฒ API
                fetch(`http://localhost:3000/api/products/${productId}`)
                    .then(res => res.json())
                    .then(product => {
                        // ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ OrderManager ููุฌูุฏ ุจุฑุง ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ
                        if (window.orderManager) {
                            window.orderManager.addToCart({
                                id: product._id,
                                name: product.name,
                                type: product.category,
                                price: product.price,
                                quantity: 1
                            });
                        } else {
                            console.error('OrderManager ุฏุฑ ุฏุณุชุฑุณ ูุณุช');
                            alert('ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ ุงุถุงูู ุดุฏ');
                        }
                    })
                    .catch(error => {
                        console.error("ุฎุทุง ุฏุฑ ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ:", error);
                        alert('ุฎุทุง ุฏุฑ ุงูุฒูุฏู ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ');
                    });
            });
        });
    }
    </script>
</body>
</html> 