<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="محصولات کابینت کابان - انواع کابینت‌های آشپزخانه با طراحی مدرن">
    <meta name="keywords" content="کابینت، کابینت آشپزخانه، کابان، mdf، ممبران، هایگلاس، محصولات">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#f1c68e">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="css/mahsool-styles.css">
    <title>محصولات کابینت کابان</title>
</head>
<body>
    <div class="overlay"></div>
    <section>
        <nav id="nav">
            <div class="header-content">
                <a href="../index.html">
                    <img src="../assets/Photo/نمادک کابان.png" alt="logo" id="logo-nav">
                </a>
                <div class="textlogo">کابینت کابان</div>
            </div>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-container">
                <div class="dropdown-cabinet">
                    <a class="cabinet" href="#">کابینت</a>
                    <div class="submenu-cabinet">
                        <a href="../cabinets/cabinet-mdf.html">کابینت MDF</a>
                        <a href="../cabinets/cabinet-metal.html">کابینت فلزی</a>
                        <a href="../cabinets/cabinet-highgloss.html">کابینت هایگلاس</a>
                        <a href="../cabinets/cabinet-membrane.html">کابینت ممبران</a>
                        <a href="../cabinets/cabinet-neoclassic.html">کابینت نئو کلاسیک</a>
                    </div>
                </div>
                <div class="dropdown-mahsool">
                    <a class="mahsool" href="#">محصولات</a>
                    <div class="submenu-mahsool">
                        <a href="cabinet.html" class="active-link">کابینت</a>
                        <a href="accessories.html">یراق آلات</a>
                        <a href="3d-designs.html">طرح سه بعدی</a>
                    </div>
                </div>
                <a class="weblog" href="#">وبلاگ</a>
                <a class="portfolio" href="../portfolio/index.html">نمونه کار</a>
                <a class="about" href="#">درباره ما</a>
                <a class="contact" href="#">تماس با ما</a>
                <div class="mobile-nav-buttons">
                    <a class="login-register" id="login-register-menu" href="../account/login.html">
                        <img src="../assets/icon/log in.png" alt="ورود" class="login-icon">
                        <span class="login-text">ورود / ثبت نام</span>
                    </a>
                </div>
                <div class="mobile-dark-mode">
                    <button id="mobileDarkMode" class="dark-mode-btn mobile">
                        <span class="moon">🌙</span>
                        <span class="sun">☀️</span>
                        <span class="dark-mode-text">حالت شب</span>
                    </button>
                </div>
            </div>
            <button id="darkModeToggle" class="dark-mode-btn desktop">
                <span class="moon">🌙</span>
                <span class="sun">☀️</span>
            </button>
            <div class="desktop-nav-buttons">
                <a class="login-register" id="login-register-menu-desktop" href="../account/login.html">
                    <img src="../assets/icon/log in.png" alt="ورود" class="login-icon">
                </a>
                <a class="cart-link" href="../account/cart.html">
                    <span class="cart-icon">🛒</span>
                    <span class="cart-count" id="cart-badge-desktop">0</span>
                </a>
            </div>
        </nav>
    </section>

    <main class="container">
        <section class="page-header">
            <h1>کابینت‌های کابان</h1>
            <p class="subtitle">طراحی و تولید انواع کابینت‌های مدرن و کلاسیک با بالاترین کیفیت</p>
        </section>

        <div class="products-container">
            <!-- محصولات از API بارگذاری خواهند شد -->
        </div>

    <section class="mahsool-detail-section">
        <div class="mahsool-container">
            <div class="mahsool-header">
                <h1>کابینت‌های کابان</h1>
                <div class="title-underline"></div>
                <p class="mahsool-description">صنایع کابینت کابان با بیش از سه دهه تجربه در طراحی و ساخت انواع کابینت، با استفاده از بهترین متریال‌ها و مدرن‌ترین تکنولوژی‌ها، محصولات متنوعی را برای سلیقه‌های مختلف ارائه می‌کند.</p>
            </div>
            
            <div class="mahsool-grid">
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-mdf.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/کابینت mdf.jpg" alt="کابینت MDF">
                        </div>
                        <div class="mahsool-info">
                            <h3>کابینت MDF</h3>
                            <p>کابینت MDF یکی از پرطرفدارترین انواع کابینت‌های آشپزخانه است که از صفحات MDF ساخته می‌شود.</p>
                            <span class="read-more">بیشتر بخوانید</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-metal.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/کابینت فلزی.jpg" alt="کابینت فلزی">
                        </div>
                        <div class="mahsool-info">
                            <h3>کابینت فلزی</h3>
                            <p>کابینت‌های فلزی از جمله مقاوم‌ترین و بادوام‌ترین انواع کابینت‌های آشپزخانه هستند.</p>
                            <span class="read-more">بیشتر بخوانید</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-highgloss.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/کابینت های گلاس.jpg" alt="کابینت هایگلاس">
                        </div>
                        <div class="mahsool-info">
                            <h3>کابینت هایگلاس</h3>
                            <p>کابینت‌های هایگلاس با سطح براق و درخشان، ظاهری لوکس و مدرن به آشپزخانه می‌بخشند.</p>
                            <span class="read-more">بیشتر بخوانید</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-membrane.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/کابینت ممبران.jpg" alt="کابینت ممبران">
                        </div>
                        <div class="mahsool-info">
                            <h3>کابینت ممبران</h3>
                            <p>کابینت‌های ممبران با روکش PVC که به صورت وکیوم روی MDF کشیده می‌شوند، از زیباترین انواع کابینت‌ها هستند.</p>
                            <span class="read-more">بیشتر بخوانید</span>
                        </div>
                    </a>
                </div>
                
                <div class="mahsool-card">
                    <a href="../cabinets/cabinet-neoclassic.html" class="mahsool-link">
                        <div class="mahsool-image">
                            <img src="../assets/Photo/کابینت نئو کلاسیک.jpg" alt="کابینت نئو کلاسیک">
                        </div>
                        <div class="mahsool-info">
                            <h3>کابینت نئو کلاسیک</h3>
                            <p>کابینت‌های نئو کلاسیک ترکیبی از سبک کلاسیک و مدرن هستند که زیبایی و عناصر سنتی را با کاربردی بودن و سادگی مدرن ترکیب می‌کنند.</p>
                            <span class="read-more">بیشتر بخوانید</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <div class="mahsool-features">
                <h2>ویژگی‌های کابینت‌های کابان</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon">🛠️</div>
                        <h3>متریال با کیفیت</h3>
                        <p>استفاده از بهترین متریال‌ها با استانداردهای روز دنیا</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">🎨</div>
                        <h3>طراحی منحصربه‌فرد</h3>
                        <p>طراحی اختصاصی متناسب با سلیقه و فضای شما</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">⏱️</div>
                        <h3>ماندگاری بالا</h3>
                        <p>دوام و ماندگاری طولانی‌مدت با کمترین استهلاک</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">🔧</div>
                        <h3>نصب تخصصی</h3>
                        <p>نصب دقیق و حرفه‌ای توسط تیم متخصص ما</p>
                    </div>
                </div>
            </div>
            
            <div class="contact-section">
                <h2>مشاوره و استعلام قیمت</h2>
                <p>برای کسب اطلاعات بیشتر و مشاوره رایگان با کارشناسان ما تماس بگیرید</p>
                <a href="#" class="contact-button">تماس با ما</a>
            </div>
        </div>
    </section>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo-container">
                <div class="footer-logo-wrapper">
                    <img src="../assets/Photo/نمادک کابان.png" alt="لوگو کابان" class="footer-logo" width="65" height="65">
                </div>
                <div class="footer-logo-text">کابینت کابان</div>
                <div class="social-icons">
                    <a href="#" class="social-icon" aria-label="اینستاگرام"><i>📸</i></a>
                    <a href="#" class="social-icon" aria-label="تلگرام"><i>📬</i></a>
                    <a href="#" class="social-icon" aria-label="واتساپ"><i>📱</i></a>
                </div>
            </div>
            
            <div class="footer-links-container">
                <div class="footer-address">
                    <h4>آدرس ما</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> تهران، صفادشت، جنب کوچه نبوت، کابینت کابان</p>
                        <p><i class="fas fa-phone"></i> <span>۰۹۱۲۱۷۷۳۹۱۵</span></p>
                        <p><i class="fas fa-envelope"></i> <span>info@kabancabinet.com</span></p>
                        <p><i class="fas fa-clock"></i> شنبه تا پنجشنبه ۹ الی ۱۹</p>
                    </div>
                </div>
                <div class="footer-links">
                    <h4>ارتباط با ما</h4>
                    <ul>
                        <li><a href="#">تماس با ما</a></li>
                        <li><a href="../about-us/index.html">درباره ما</a></li>
                        <li class="footer-contact-item"><i class="footer-icon">📱</i><span>۰۹۱۲۱۷۷۳۹۱۵</span></li>
                        <li class="footer-contact-item"><i class="footer-icon">📧</i><span>info@kabancabinet.ir</span></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="copyright">© ۱۴۰۳ کابینت کابان - تمامی حقوق محفوظ است</p>
        </div>
    </footer>

    <script src="../scripts/main.js" defer></script>
    <script src="../scripts/sw-register.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // دریافت محصولات دسته‌بندی کابینت از API
        getCabinetProducts();
    });

    /**
     * دریافت محصولات کابینت از API
     */
    function getCabinetProducts() {
        const productsContainer = document.querySelector('.products-container');
        
        // نمایش وضعیت بارگذاری
        productsContainer.innerHTML = '<div class="loading-spinner">در حال بارگذاری محصولات...</div>';
        
        // درخواست فیلتر شده به API برای دریافت فقط محصولات دسته‌بندی کابینت
        fetch("http://localhost:3000/api/products?category=cabinet")
            .then(response => {
                if (!response.ok) {
                    throw new Error(`خطای HTTP: ${response.status}`);
                }
                return response.json();
            })
            .then(products => {
                console.log("کابینت‌های دریافت شده:", products);
                
                // نمایش محصولات در صفحه
                displayCabinetProducts(products, productsContainer);
            })
            .catch(error => {
                console.error("خطا در دریافت کابینت‌ها:", error);
                productsContainer.innerHTML = `
                    <div class="error-message">
                        <p>متأسفانه در دریافت اطلاعات کابینت‌ها خطایی رخ داده است.</p>
                        <p>لطفاً صفحه را دوباره بارگذاری کنید یا بعداً تلاش کنید.</p>
                        <p>جزئیات خطا: ${error.message}</p>
                    </div>
                `;
            });
    }

    /**
     * نمایش محصولات کابینت در صفحه
     */
    function displayCabinetProducts(products, container) {
        // اگر محصولی وجود نداشت، پیام مناسب نمایش بده
        if (!products || products.length === 0) {
            container.innerHTML = '<div class="no-products">محصولی برای نمایش وجود ندارد</div>';
            return;
        }
        
        // پاک کردن محتوای قبلی
        container.innerHTML = '';
        
        // ایجاد و افزودن کارت محصول برای هر کابینت
        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            
            // تصویر پیش‌فرض اگر محصول تصویر نداشت
            const imageUrl = product.images && product.images.length > 0 
                ? product.images[0] 
                : '../assets/Photo/placeholder.jpg';
            
            // ویژگی‌های محصول
            const featuresList = product.features && product.features.length > 0
                ? `<ul class="product-features">
                    ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                   </ul>`
                : '';
            
            // رنگ‌های موجود
            const colorsList = product.colors && product.colors.length > 0
                ? `<div class="product-colors">
                    ${product.colors.map(color => `<span class="color-option" style="background-color: ${color}"></span>`).join('')}
                   </div>`
                : '';
            
            productCard.innerHTML = `
                <div class="product-image">
                    <img src="${imageUrl}" alt="${product.name}" loading="lazy">
                    ${product.inStock ? '<span class="badge in-stock">موجود</span>' : '<span class="badge out-of-stock">ناموجود</span>'}
                </div>
                <div class="product-details">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description.substring(0, 100)}...</p>
                    ${featuresList}
                    ${colorsList}
                    <div class="product-price">${formatPrice(product.price)} تومان</div>
                    <div class="product-actions">
                        <button class="btn view-product" data-id="${product._id}">مشاهده جزئیات</button>
                        <button class="btn add-to-cart" data-id="${product._id}" ${!product.inStock ? 'disabled' : ''}>
                            ${product.inStock ? 'افزودن به سبد' : 'ناموجود'}
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(productCard);
        });
        
        // اضافه کردن رویدادها به دکمه‌های محصول
        addCabinetProductEventListeners();
    }

    /**
     * فرمت کردن قیمت به صورت خوانا با جداکننده هزارگان
     */
    function formatPrice(price) {
        return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    /**
     * اضافه کردن رویدادها به دکمه‌های محصول
     */
    function addCabinetProductEventListeners() {
        // رویداد دکمه مشاهده جزئیات
        document.querySelectorAll('.view-product').forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-id');
                window.location.href = `product.html?id=${productId}`;
            });
        });
        
        // رویداد دکمه افزودن به سبد خرید
        document.querySelectorAll('.add-to-cart:not([disabled])').forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-id');
                
                // دریافت اطلاعات محصول از API
                fetch(`http://localhost:3000/api/products/${productId}`)
                    .then(res => res.json())
                    .then(product => {
                        // استفاده از کلاس OrderManager موجود برای افزودن به سبد خرید
                        if (window.orderManager) {
                            window.orderManager.addToCart({
                                id: product._id,
                                name: product.name,
                                type: product.category,
                                price: product.price,
                                quantity: 1
                            });
                        } else {
                            console.error('OrderManager در دسترس نیست');
                            alert('محصول به سبد خرید اضافه شد');
                        }
                    })
                    .catch(error => {
                        console.error("خطا در افزودن به سبد خرید:", error);
                        alert('خطا در افزودن محصول به سبد خرید');
                    });
            });
        });
    }
    </script>
</body>
</html> 